<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#5a40f8">
    <title>Talented Multilingual Video Workflow</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://unpkg.com/@tabler/icons-webfont@latest/tabler-icons.min.css" rel="stylesheet">
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to content</a>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1 class="title"><i class="ti ti-clapperboard icon" aria-hidden="true"></i> Talented Multilingual Video Workflow</h1>
                <p class="subtitle">Professional step-by-step workflow for converting content into Hindi, Tamil, Telugu, Gujarati with AI-powered processing</p>
            </div>
            <div class="header-actions">
                <button id="steps-toggle" class="btn-secondary" aria-expanded="false" aria-controls="sidebar" aria-label="Open steps menu">
                    <i class="ti ti-menu-2" aria-hidden="true"></i> Steps
                </button>
                <button id="theme-toggle" class="btn-secondary theme-toggle" role="switch" aria-checked="false" aria-label="Toggle color theme" title="Toggle theme">
                    <i class="ti ti-sun" aria-hidden="true"></i>
                    <div class="switch-track">
                        <div class="switch-knob" aria-hidden="true"></div>
                    </div>
                    <span class="visually-hidden">Theme</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main" id="main-content">
            <div class="workflow-container">
                <!-- Sidebar Navigation -->
                <aside class="sidebar" id="sidebar" role="navigation" aria-label="Workflow Steps">
                    <button class="sidebar-close" id="sidebar-close" aria-label="Close steps menu"><i class="ti ti-x" aria-hidden="true"></i></button>
                    <h3>Workflow Steps</h3>
                    <nav class="step-nav">
                        <div class="step-nav-item active" data-step="1" aria-current="step" role="button" tabindex="0">
                            <span class="step-number">1</span>
                            <div>
                                <div>Video/Audio Input</div>
                                <small>Upload or convert media</small>
                            </div>
                        </div>
                        <div class="step-nav-item" data-step="2" role="button" tabindex="0">
                            <span class="step-number">2</span>
                            <div>
                                <div>AI Transcription</div>
                                <small>Speech to text</small>
                            </div>
                        </div>
                        <div class="step-nav-item" data-step="3" role="button" tabindex="0">
                            <span class="step-number">3</span>
                            <div>
                                <div>Cultural Translation</div>
                                <small>Multi-language adaptation</small>
                            </div>
                        </div>
                        <div class="step-nav-item" data-step="4" role="button" tabindex="0">
                            <span class="step-number">4</span>
                            <div>
                                <div>Voice Synthesis</div>
                                <small>Generate new audio</small>
                            </div>
                        </div>
                        <div class="step-nav-item" data-step="5" role="button" tabindex="0">
                            <span class="step-number">5</span>
                            <div>
                                <div>Lip Sync</div>
                                <small>Create final videos</small>
                            </div>
                        </div>
                    </nav>
                </aside>

                <!-- Content Area -->
                <div class="content-area">
                    <!-- Step 1: Video/Audio Input -->
                    <div class="step-content active" id="step-1">
                        <div class="card">
                            <div class="card-header">
                                <h2><i class="ti ti-video"></i> Step 1: Video/Audio Input</h2>
                                <p>Upload your media file or start with existing files</p>
                            </div>

                            <div class="file-area">
                                <h4><i class="ti ti-folder"></i> Input File</h4>
                                <div class="upload-zone" id="upload-zone-1">
                                    <input type="file" id="file-input-1" accept=".mp4,.avi,.mov,.mp3,.wav,.m4a" hidden>
                                    <i class="upload-icon ti ti-upload" aria-hidden="true"></i>
                                    <h3>Drag & Drop or Click to Upload</h3>
                                    <p>Supports: MP4, AVI, MOV, MP3, WAV, M4A</p>
                                    <p>Max size: 100MB</p>
                                </div>
                                
                                <div class="action-buttons">
                                    <button class="btn-primary" onclick="document.getElementById('file-input-1').click()">
                                        <i class="ti ti-folder-open"></i> Choose File
                                    </button>
                                    <button class="btn-secondary" id="use-existing-btn">
                                        <i class="ti ti-compass"></i> Use Existing Files
                                    </button>
                                </div>
                            </div>

                            <div class="file-area" id="output-area-1" style="display: none;">
                                <h4><i class="ti ti-file-music"></i> Extracted Audio</h4>
                                <div class="file-viewer" id="audio-info">
                                    <p>No audio file generated yet.</p>
                                </div>
                                <div class="action-buttons">
                                    <button class="btn-accent" id="download-audio"><i class="ti ti-download"></i> Download Audio</button>
                                    <button class="btn-primary" id="proceed-to-step-2"><i class="ti ti-arrow-right"></i> Proceed to Transcription</button>
                                </div>
                            </div>

                            <div class="progress-bar" id="progress-1" style="display: none;">
                                <div class="progress-fill"></div>
                            </div>
                            <div class="status-badge pending" id="status-1">Ready</div>
                        </div>
                    </div>

                    <!-- Step 2: Transcription -->
                    <div class="step-content" id="step-2">
                        <div class="card">
                            <div class="card-header">
                                <h2><i class="ti ti-microphone-2"></i> Step 2: AI Transcription</h2>
                                <p>Convert speech to text using OpenAI Whisper</p>
                            </div>

                            <div class="file-area">
                                <h4><i class="ti ti-folder"></i> Audio Input</h4>
                                <div class="upload-zone" id="upload-zone-2">
                                    <input type="file" id="file-input-2" accept=".mp3,.wav,.m4a" hidden>
                                    <i class="upload-icon ti ti-upload" aria-hidden="true"></i>
                                    <h3>Upload Audio File (Optional)</h3>
                                    <p>Or use audio from Step 1</p>
                                </div>
                                
                                <div class="action-buttons">
                                    <button class="btn-primary" onclick="document.getElementById('file-input-2').click()">
                                        <i class="ti ti-microphone"></i> Upload Audio
                                    </button>
                                    <button class="btn-secondary" id="start-transcription">
                                        <i class="ti ti-rocket"></i> Start Transcription
                                    </button>
                                </div>
                            </div>

                            <div class="file-area" id="output-area-2" style="display: none;">
                                <h4><i class="ti ti-file-text"></i> Generated Transcript</h4>
                                <textarea class="file-editor" id="transcript-editor" placeholder="Transcript will appear here..."></textarea>
                                
                                <div class="action-buttons">
                                    <button class="btn-secondary" id="save-transcript"><i class="ti ti-device-floppy"></i> Save Changes</button>
                                    <button class="btn-accent" id="download-transcript"><i class="ti ti-download"></i> Download Transcript</button>
                                    <button class="btn-primary" id="proceed-to-step-3"><i class="ti ti-arrow-right"></i> Proceed to Translation</button>
                                </div>
                            </div>

                            <div class="progress-bar" id="progress-2" style="display: none;">
                                <div class="progress-fill"></div>
                            </div>
                            <div class="status-badge pending" id="status-2">Ready</div>
                        </div>
                    </div>

                    <!-- Step 3: Translation -->
                    <div class="step-content" id="step-3">
                        <div class="card">
                            <div class="card-header">
                                <h2><i class="ti ti-language"></i> Step 3: Cultural Translation</h2>
                                <p>Generate culturally adapted translations using Claude AI</p>
                            </div>

                            <div class="file-area">
                                <h4><i class="ti ti-file-description"></i> Transcript Input</h4>
                                <div class="upload-zone" id="upload-zone-3">
                                    <input type="file" id="file-input-3" accept=".txt" hidden>
                                    <i class="upload-icon ti ti-upload" aria-hidden="true"></i>
                                    <h3>Upload Transcript (Optional)</h3>
                                    <p>Or use transcript from Step 2</p>
                                </div>
                                
                                <div class="action-buttons">
                                    <button class="btn-primary" onclick="document.getElementById('file-input-3').click()">
                                        <i class="ti ti-file-upload"></i> Upload Transcript
                                    </button>
                                    <button class="btn-secondary" id="start-translation">
                                        <i class="ti ti-robot"></i> Start Translation
                                    </button>
                                </div>
                            </div>

                            <!-- External Voice Generation Guidance -->
                            <div class="file-area guidance-section">
                                <h4><i class="ti ti-microphone" aria-hidden="true"></i> External Voice Generation (Telugu & Gujarati)</h4>
                                <div class="guidance-content">
                                    <p><strong><i class="ti ti-clipboard-list" aria-hidden="true"></i> Instructions for Telugu & Gujarati Voice Generation:</strong></p>
                                    <ol>
                                        <li><strong>Go to <a href="https://elevenlabs.com" target="_blank">elevenlabs.com</a></strong></li>
                                        <li><strong>Log in to your account</strong></li>
                                        <li><strong>Copy the translation from the tabs below:</strong></li>
                                        <ul>
                                            <li>For <strong>Telugu</strong>: Copy text from "తెలుగు Telugu" tab</li>
                                            <li>For <strong>Gujarati</strong>: Copy text from "ગુજરાતી Gujarati" tab</li>
                                        </ul>
                                        <li><strong>Paste into ElevenLabs text-to-speech</strong></li>
                                        <li><strong>Select appropriate voice (if available)</strong></li>
                                        <li><strong>Generate and download the audio file</strong></li>
                                        <li><strong>Upload your generated audio in Step 4 below</strong></li>
                                    </ol>
                                    <div class="note-box">
                                        <p><strong><i class="ti ti-bulb" aria-hidden="true"></i> Note:</strong> ElevenLabs currently supports Hindi & Tamil natively. For Telugu & Gujarati, you'll need to use external voice generation tools or record your own audio.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="file-area" id="output-area-3" style="display: none;">
                                <h4><i class="ti ti-world"></i> Cultural Translations</h4>
                                
                                <div class="language-tabs" role="tablist" aria-label="Translation languages">
                                    <button class="language-tab active" data-lang="hindi" role="tab" aria-selected="true" aria-controls="translation-editor"><span class="lang-badge">HI</span> हिंदी Hindi</button>
                                    <button class="language-tab" data-lang="tamil" role="tab" aria-selected="false" aria-controls="translation-editor"><span class="lang-badge">TA</span> தமிழ் Tamil</button>
                                    <button class="language-tab" data-lang="gujarati" role="tab" aria-selected="false" aria-controls="translation-editor"><span class="lang-badge">GU</span> ગુજરાતી Gujarati</button>
                                    <button class="language-tab" data-lang="telugu" role="tab" aria-selected="false" aria-controls="translation-editor"><span class="lang-badge">TE</span> తెలుగు Telugu</button>
                                </div>

                                <div class="language-content" role="tabpanel" aria-labelledby="translation-tabs">
                                    <textarea class="file-editor" id="translation-editor" placeholder="Translation will appear here..." role="textbox" aria-label="Translation text editor"></textarea>
                                </div>
                                
                                <div class="action-buttons">
                                    <button class="btn-secondary" id="save-translations"><i class="ti ti-device-floppy"></i> Save All Translations</button>
                                    <button class="btn-accent" id="download-translations"><i class="ti ti-download"></i> Download All</button>
                                    <button class="btn-primary" id="proceed-to-step-4"><i class="ti ti-arrow-right"></i> Proceed to Voice Synthesis</button>
                                </div>
                            </div>

                            <div class="progress-bar" id="progress-3" style="display: none;">
                                <div class="progress-fill"></div>
                            </div>
                            <div class="status-badge pending" id="status-3">Ready</div>
                        </div>
                    </div>

                    <!-- Step 4: Voice Synthesis -->
                    <div class="step-content" id="step-4">
                        <div class="card">
                            <div class="card-header">
                                <h2><i class="ti ti-volume"></i> Step 4: Voice Synthesis</h2>
                                <p>Generate audio using ElevenLabs TTS (Hindi & Tamil) or upload external audio</p>
                            </div>

                            <!-- AI Voice Generation Section -->
                            <div class="file-area">
                                <h4><i class="ti ti-cpu"></i> AI Voice Generation (Hindi & Tamil)</h4>
                                <p>Automatically generate high-quality audio using ElevenLabs API</p>
                                
                                <div class="language-tabs">
                                    <button class="language-tab active" data-lang="hindi">Hindi AI Voice</button>
                                    <button class="language-tab" data-lang="tamil">Tamil AI Voice</button>
                                </div>

                                <div class="language-content">
                                    <div class="ai-voice-info">
                                        <div class="tts-status">
                                            <span class="status-indicator ready"><i class="ti ti-checks"></i> Ready for AI generation</span>
                                            <p><strong>Voice:</strong> Niharika (Professional Indian voice)</p>
                                            <p><strong>Quality:</strong> HD audio with natural pronunciation</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="action-buttons">
                                    <button class="btn-primary" id="start-voice-synthesis">
                                        <i class="ti ti-robot"></i> Generate AI Voices
                                    </button>
                                </div>
                            </div>

                            <!-- External Voice Upload Section -->
                            <div class="file-area">
                                <h4><i class="ti ti-microphone"></i> External Voice Upload (Telugu & Gujarati)</h4>
                                <p>Upload your pre-generated audio files for languages not supported by AI TTS</p>
                                
                                <div class="language-tabs">
                                    <button class="language-tab" data-lang="gujarati"><span class="lang-badge">GU</span> Gujarati Upload</button>
                                    <button class="language-tab" data-lang="telugu"><span class="lang-badge">TE</span> Telugu Upload</button>
                                </div>

                                <div class="language-content">
                                    <div class="upload-section" id="gujarati-upload-section" style="display: block;">
                                            <h5><i class="ti ti-cloud-upload"></i> Upload Gujarati Audio File</h5>
                                        <div class="upload-zone" id="gujarati-audio-upload">
                                            <input type="file" id="gujarati-audio-input" accept=".mp3,.wav,.m4a" data-lang="gujarati" hidden>
                                                <i class="upload-icon ti ti-upload" aria-hidden="true"></i>
                                            <h3>Upload Gujarati Audio</h3>
                                            <p>Drag & drop or click to select your Gujarati voice file</p>
                                            <p><strong>Supported:</strong> MP3, WAV, M4A (max 100MB)</p>
                                        </div>
                                        <div class="file-preview" id="gujarati-preview" style="display: none;">
                                            <p><i class="ti ti-file"></i> File: <span id="gujarati-filename"></span></p>
                                            <p><i class="ti ti-check"></i> Ready for lip sync</p>
                                        </div>
                                    </div>

                                    <div class="upload-section" id="telugu-upload-section" style="display: none;">
                                            <h5><i class="ti ti-cloud-upload"></i> Upload Telugu Audio File</h5>
                                        <div class="upload-zone" id="telugu-audio-upload">
                                            <input type="file" id="telugu-audio-input" accept=".mp3,.wav,.m4a" data-lang="telugu" hidden>
                                                <i class="upload-icon ti ti-upload" aria-hidden="true"></i>
                                            <h3>Upload Telugu Audio</h3>
                                            <p>Drag & drop or click to select your Telugu voice file</p>
                                            <p><strong>Supported:</strong> MP3, WAV, M4A (max 100MB)</p>
                                        </div>
                                        <div class="file-preview" id="telugu-preview" style="display: none;">
                                            <p><i class="ti ti-file"></i> File: <span id="telugu-filename"></span></p>
                                            <p><i class="ti ti-check"></i> Ready for lip sync</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="upload-guidance">
                                    <h6><i class="ti ti-info-circle"></i> Upload Instructions:</h6>
                                    <ul>
                                        <li>Ensure your audio matches the translation text duration</li>
                                        <li>Audio should be clear and well-pronounced</li>
                                        <li>File size limit: 100MB</li>
                                        <li>Supported formats: MP3, WAV, M4A</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="file-area" id="output-area-4" style="display: none;">
                                <h4><i class="ti ti-music"></i> Audio Files Ready</h4>
                                <div class="results-grid" id="audio-results">
                                    <!-- Audio results will be populated here -->
                                </div>
                                
                                <div class="action-buttons">
                                    <button class="btn-accent" id="download-all-audio"><i class="ti ti-download"></i> Download All Audio</button>
                                    <button class="btn-primary" id="proceed-to-step-5"><i class="ti ti-arrow-right"></i> Proceed to Lip Sync</button>
                                </div>
                            </div>

                            <div class="progress-bar" id="progress-4" style="display: none;">
                                <div class="progress-fill"></div>
                            </div>
                            <div class="status-badge pending" id="status-4">Ready</div>
                        </div>
                    </div>

                    <!-- Step 5: Lip Sync -->
                    <div class="step-content" id="step-5">
                        <div class="card">
                            <div class="card-header">
                                <h2><i class="ti ti-wand"></i> Step 5: Lip Sync Magic</h2>
                                <p>Create lip-synced videos using Wav2Lip API</p>
                            </div>

                            <div class="file-area">
                                <h4><i class="ti ti-movie"></i> Video Input</h4>
                                <div class="upload-zone" id="upload-zone-5">
                                    <input type="file" id="file-input-5" accept=".mp4,.avi,.mov" hidden>
                                    <i class="upload-icon ti ti-upload" aria-hidden="true"></i>
                                    <h3>Upload Video File (Optional)</h3>
                                    <p>Or use video from Step 1</p>
                                </div>
                            </div>

                            <div class="file-area">
                                <h4><i class="ti ti-music"></i> Audio Files</h4>
                                <p>Upload audio files or use generated audio from Step 4</p>
                                
                                <div class="language-tabs">
                                    <button class="language-tab active" data-lang="hindi"><span class="lang-badge">HI</span> Hindi</button>
                                    <button class="language-tab" data-lang="tamil"><span class="lang-badge">TA</span> Tamil</button>
                                    <button class="language-tab" data-lang="gujarati"><span class="lang-badge">GU</span> Gujarati</button>
                                    <button class="language-tab" data-lang="telugu"><span class="lang-badge">TE</span> Telugu</button>
                                </div>

                                <div class="language-content">
                                    <div class="upload-zone" id="lip-sync-audio-zone">
                                        <input type="file" id="lip-sync-audio-input" accept=".mp3,.wav,.m4a" hidden>
                                        <i class="upload-icon ti ti-upload" aria-hidden="true"></i>
                                        <h3>Upload Audio for Lip Sync</h3>
                                        <p>Audio for selected language</p>
                                    </div>
                                </div>
                                
                                <div class="action-buttons">
                                    <button class="btn-primary" onclick="document.getElementById('lip-sync-audio-input').click()">
                                        <i class="ti ti-folder-open"></i> Upload Audio
                                    </button>
                                    <button class="btn-secondary" id="start-lip-sync">
                                        <i class="ti ti-player-play"></i> Start Lip Sync
                                    </button>
                                </div>
                            </div>

                            <div class="file-area" id="output-area-5" style="display: none;">
                                <h4><i class="ti ti-clapperboard"></i> Final Videos</h4>
                                <div class="results-grid" id="video-results">
                                    <!-- Video results will be populated here -->
                                </div>
                                
                                <div class="action-buttons">
                                    <button class="btn-accent" id="download-all-videos"><i class="ti ti-download"></i> Download All Videos</button>
                                    <button class="btn-primary" id="start-new-workflow"><i class="ti ti-refresh"></i> Start New Workflow</button>
                                </div>
                            </div>

                            <div class="progress-bar" id="progress-5" style="display: none;">
                                <div class="progress-fill"></div>
                            </div>
                            <div class="status-badge pending" id="status-5">Ready</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Mobile Stepper (Sticky bottom navigation for steps) -->
        <div class="mobile-stepper" id="mobile-stepper" role="navigation" aria-label="Mobile workflow steps">
            <div class="step-track">
                <button class="step-dot active" data-step="1" aria-label="Go to Step 1">
                    <span>1</span>
                </button>
                <button class="step-dot" data-step="2" aria-label="Go to Step 2">
                    <span>2</span>
                </button>
                <button class="step-dot" data-step="3" aria-label="Go to Step 3">
                    <span>3</span>
                </button>
                <button class="step-dot" data-step="4" aria-label="Go to Step 4">
                    <span>4</span>
                </button>
                <button class="step-dot" data-step="5" aria-label="Go to Step 5">
                    <span>5</span>
                </button>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <p>Talented Agency - Professional multilingual content creation</p>
            <div class="footer-links">
                <a href="#" class="footer-link"><i class="ti ti-book-2"></i> Documentation</a>
                <a href="#" class="footer-link"><i class="ti ti-message-circle"></i> Support</a>
                <a href="#" class="footer-link"><i class="ti ti-bug"></i> Report Issue</a>
            </div>
        </footer>
    </div>

    <!-- Backdrop for mobile sidebar -->
    <div id="backdrop" class="backdrop" hidden></div>

    <!-- Global loading overlay -->
    <div id="global-loader" class="global-loader" hidden aria-live="assertive" aria-busy="true">
        <div class="loader-content">
            <div class="loader-spinner"></div>
            <h3 id="loader-message">Processing</h3>
            <p id="loader-subtext">This can take a few minutes depending on the step.</p>
        </div>
    </div>

    <!-- Toast container -->
    <div id="toast-container" class="toast-container" aria-live="polite" aria-atomic="true"></div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
